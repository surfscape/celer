<UserControl x:Class="Celer.Views.UserControls.MainApp.Dashboard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:Celer.Converters"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             xmlns:local="clr-namespace:Celer.Views.UserControls.MainApp"
             xmlns:local1="clr-namespace:Celer"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"
             xmlns:viewmodels="clr-namespace:Celer.ViewModels"
             xmlns:components="clr-namespace:Celer.Views.Components"
             d:DataContext="{d:DesignInstance Type=viewmodels:DashboardViewModel}"
             d:Width="900"
             mc:Ignorable="d">
    <UserControl.Resources>
        <converters:MemorySizeConverter x:Key="MemorySizeConverter" />
        <converters:DiskSizeConverter x:Key="DiskSizeConverter" />
        <converters:BooleanToVisibilityConverter x:Key="BoolToVisConverter" />
        <converters:ZeroToVisibilityConverter x:Key="ZeroToVisibilityConverter" />
        <converters:PositiveToNegative x:Key="PositiveToNegativeConverter" />
        <DataTemplate x:Key="ItemTemplate">
            <Border Padding="8"
                    CornerRadius="4"
                    BorderThickness="1"
                    BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                    Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
                <StackPanel Margin="0">
                    <StackPanel Orientation="Horizontal"
                                Margin="0,0,0,6">
                        <TextBlock 
                                   FontSize="17"
                                   FontWeight="DemiBold"
                                   Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                   Text="{Binding Name}" />
                        <TextBlock Margin="8,0,0,0"
                                   FontSize="17"
                                   Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                   FontWeight="DemiBold"
                                   Text="{Binding Label}" />
                    </StackPanel>
                    <StackPanel>
                        <ProgressBar Margin="0,0,0,6" Maximum="{Binding Size}" Value="{Binding UsedSpace}"></ProgressBar>
                        <TextBlock Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                   Text="{Binding Format, StringFormat=File System: {0}}" />
                        <TextBlock Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                   Text="{Binding Size, Converter={StaticResource DiskSizeConverter}, StringFormat=Size {0}}" />
                        <TextBlock Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                   Text="{Binding UsedSpace, Converter={StaticResource DiskSizeConverter}, StringFormat=Used: {0}}" />
                    </StackPanel>
                </StackPanel>
            </Border>
        </DataTemplate>
    </UserControl.Resources>
    <Grid>
        <components:ModuleLoadingStatus Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"></components:ModuleLoadingStatus>
        <Grid xmlns:local2="clr-namespace:Celer.Views.Components"
              x:Name="MainContent"
              Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisConverter}, ConverterParameter=True}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <Border Padding="16,16">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Border Padding="0,0,0,8">
                        <StackPanel>
                            <TextBlock FontWeight="Medium"
                                       Foreground="{DynamicResource TextFillColorTertiaryBrush}">Welcome to Celer</TextBlock>
                            <TextBlock Style="{StaticResource Heading1}">System Status</TextBlock>
                        </StackPanel>
                    </Border>
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.Resources>
                            <Style TargetType="Border">
                                <Setter Property="Margin"
                                        Value="0,0,8,0" />
                            </Style>
                        </Grid.Resources>
                        <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                                CornerRadius="6"
                                BorderThickness="1"
                                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                                Padding="8">
                            <StackPanel Grid.Column="0">
                                <TextBlock Style="{StaticResource Heading2}"
                                           Text="CPU" />
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid>
                                        <Grid Margin="0,0,0,-16">
                                            <ed:Arc StartAngle="-100"
                                                    EndAngle="100"
                                                    Stretch="None"
                                                    Height="100"
                                                    Width="100"
                                                    StrokeThickness="16"
                                                    StrokeDashArray=".25"
                                                    Stroke="{DynamicResource ControlStrongFillColorDefaultBrush}" />
                                            <ed:Arc StartAngle="-100"
                                                    EndAngle="{Binding CpuUsage, Converter={StaticResource PositiveToNegativeConverter}, StringFormat={}{0}}"
                                                    Stretch="None"
                                                    Height="100"
                                                    Width="100"
                                                    StrokeThickness="16"
                                                    StrokeDashArray=".25"
                                                    Stroke="{DynamicResource AccentFillColorDefaultBrush}" />
                                        </Grid>
                                        <StackPanel HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Margin="0,0,0,0">
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Bottom"
                                                       Margin="0,20,0,4"
                                                       Text="{Binding CpuUsage, StringFormat={}{0}%}"
                                                       Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Bottom"
                                                       Visibility="Collapsed"
                                                       Text="Idle"
                                                       FontSize="13"
                                                       Foreground="{DynamicResource TextFillColorTertiaryBrush}" />
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                                <TextBlock Margin="0,0,0,0"
                                           FontSize="14"
                                           FontWeight="DemiBold"
                                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                           Text="{Binding CpuName}"
                                           TextWrapping="Wrap" />
                                <UniformGrid Columns="2"
                                             Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                                   Text="Processes"
                                                   Style="{StaticResource BodyTextBlockStyle}" />
                                        <TextBlock Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                   Margin="0,2,0,0"
                                                   Text="{Binding ProcessCount}"
                                                   FontSize="17"
                                                   Style="{StaticResource BodyStrongTextBlockStyle}" />
                                    </StackPanel>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                                   Text="Threads"
                                                   Style="{StaticResource BodyTextBlockStyle}" />
                                        <TextBlock Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                   Margin="0,2,0,0"
                                                   Text="{Binding ThreadCount}"
                                                   FontSize="17"
                                                   Style="{StaticResource BodyStrongTextBlockStyle}" />
                                    </StackPanel>
                                </UniformGrid>
                            </StackPanel>
                        </Border>
                        <Border Grid.Column="1"
                                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                                CornerRadius="6"
                                BorderThickness="1"
                                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                                Padding="8">
                            <StackPanel>
                                <UniformGrid Columns="2">
                                    <TextBlock Style="{StaticResource Heading2}"
                                               Text="Memory" />
                                    <TextBlock FontSize="17"
                                               VerticalAlignment="Center"
                                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                               HorizontalAlignment="Right"
                                               Text="{Binding TotalMemory, Converter={StaticResource MemorySizeConverter}, ConverterParameter=true, StringFormat={}}" />
                                </UniformGrid>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid>
                                        <Grid Margin="0,0,0,-16">
                                            <ed:Arc StartAngle="-100"
                                                    EndAngle="100"
                                                    Stretch="None"
                                                    Height="100"
                                                    Width="100"
                                                    StrokeThickness="16"
                                                    StrokeDashArray=".25"
                                                    Stroke="{DynamicResource ControlStrongFillColorDefaultBrush}" />
                                            <ed:Arc StartAngle="-100"
                                                    EndAngle="{Binding UsedMemoryGraph, StringFormat={}{0}}"
                                                    Stretch="None"
                                                    Height="100"
                                                    Width="100"
                                                    StrokeThickness="16"
                                                    StrokeDashArray=".25"
                                                    Stroke="{DynamicResource AccentFillColorDefaultBrush}" />
                                        </Grid>
                                        <StackPanel HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Margin="0,0,0,0">
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Bottom"
                                                       Margin="0,16,0,0"
                                                       Text="{Binding MemoryUsage, StringFormat={}{0}%}"
                                                       Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                        </StackPanel>

                                    </Grid>
                                </Grid>
                                <UniformGrid Columns="2"
                                             Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                                   Text="In Use "
                                                   Style="{StaticResource BodyTextBlockStyle}" />
                                        <TextBlock Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                   Margin="0,2,0,0"
                                                   Text="{Binding UsedMemory, Converter={StaticResource MemorySizeConverter}}"
                                                   FontSize="17"
                                                   Style="{StaticResource BodyStrongTextBlockStyle}" />
                                    </StackPanel>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                                   Text="Available"
                                                   Style="{StaticResource BodyTextBlockStyle}" />
                                        <TextBlock Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                   Margin="0,2,0,0"
                                                   Text="{Binding AvailableMemory, Converter={StaticResource MemorySizeConverter}}"
                                                   FontSize="17"
                                                   Style="{StaticResource BodyStrongTextBlockStyle}" />
                                    </StackPanel>
                                </UniformGrid>
                            </StackPanel>
                        </Border>
                        <Border Margin="0"
                                Grid.Column="2"
                                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                                CornerRadius="6"
                                BorderThickness="1"
                                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                                Padding="8">
                            <StackPanel>
                                <TextBlock Style="{StaticResource Heading2}"
                                           Text="GPU" />
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid>
                                        <Grid Margin="0,0,0,-16">
                                            <ed:Arc StartAngle="-100"
                                                    EndAngle="100"
                                                    Stretch="None"
                                                    Height="100"
                                                    Width="100"
                                                    StrokeThickness="16"
                                                    StrokeDashArray=".25"
                                                    Stroke="{DynamicResource ControlStrongFillColorDefaultBrush}" />
                                            <ed:Arc StartAngle="-100"
                                                    EndAngle="{Binding GpuGeneralUsage, Converter={StaticResource PositiveToNegativeConverter}, StringFormat={}{0}}"
                                                    Stretch="None"
                                                    Height="100"
                                                    Width="100"
                                                    StrokeThickness="16"
                                                    StrokeDashArray=".25"
                                                    Stroke="{DynamicResource AccentFillColorDefaultBrush}" />
                                        </Grid>
                                        <StackPanel HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Margin="0,0,0,0">
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Bottom"
                                                       Margin="0,16,0,0"
                                                       Text="{Binding GpuGeneralUsage, StringFormat={}{0}%}"
                                                       Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                        </StackPanel>

                                    </Grid>
                                </Grid>
                                <TextBlock FontWeight="DemiBold"
                                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                           Text="{Binding GpuName}" />
                                <TextBlock Margin="0,4,0,4"
                                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                           Text="{Binding GpuVendor}" />
                                <StackPanel Margin="0,0,0,4"
                                            Orientation="Horizontal">
                                    <TextBlock Text="Driver "
                                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                    <TextBlock Text="{Binding GpuDriverVersion}"
                                               Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="DirectX "
                                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                    <TextBlock Text="{Binding GpuDirectXVersion}"
                                               Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                                </StackPanel>

                            </StackPanel>
                        </Border>
                    </Grid>
                    <Grid Margin="0,8,0,0"
                          Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto">
                            </RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.Resources>
                            <Style TargetType="StackPanel">
                                <Setter Property="Margin"
                                        Value="0,0,16,0" />
                            </Style>
                        </Grid.Resources>
                        <Border Margin="0,0,8,0"
                                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                                CornerRadius="6"
                                BorderThickness="1"
                                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                                Padding="8">
                            <Grid Margin="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"></RowDefinition>
                                    <RowDefinition Height="auto"></RowDefinition>
                                </Grid.RowDefinitions>
                                <Grid Margin="0,0,0,4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"></ColumnDefinition>
                                        <ColumnDefinition Width="auto"></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource Heading2}">Drives</TextBlock>
                                    <Button Grid.Column="1"
                                            Command="{Binding RefreshDisksCommand}">
                                        <iconPacks:PackIconControl Width="14"
                                                                   Height="14"
                                                                   Kind="{x:Static iconPacks:PackIconLucideKind.RefreshCw}" />
                                    </Button>
                                </Grid>
                                <DockPanel Grid.Row="1">
                                    <ListBox Height="161"
                                             ItemTemplate="{StaticResource ItemTemplate}"
                                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                             ItemsSource="{Binding DiskData}">
                                        <ListBox.ItemContainerStyle>
                                            <Style TargetType="{x:Type ListBoxItem}">
                                                <Setter Property="Focusable"
                                                        Value="False" />
                                                <Setter Property="IsHitTestVisible"
                                                        Value="False" />
                                                <Setter Property="HorizontalContentAlignment"
                                                        Value="Stretch">
                                                </Setter>
                                                <Setter Property="Margin"
                                                        Value="-5,0,-5,0"></Setter>
                                            </Style>
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </DockPanel>
                            </Grid>
                        </Border>
                        <Border Grid.Column="1"
                                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                                CornerRadius="6"
                                BorderThickness="1"
                                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                                Padding="8">
                            <StackPanel Margin="0">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"></ColumnDefinition>
                                        <ColumnDefinition Width="*"></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource Heading2}">Quick Center</TextBlock>
                                    <ToggleButton Name="PCheckBox"
                                                  Grid.Column="1"
                                                  FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                  Content="&#xE70F;"
                                                  Visibility="Hidden"
                                                  HorizontalAlignment="Right">
                                    </ToggleButton>
                                </Grid>
                                <Popup StaysOpen="False"
                                       IsOpen="{Binding ElementName=PCheckBox,Path=IsChecked}"
                                       PlacementTarget="{Binding ElementName=PCheckBox}"
                                       AllowsTransparency="True"
                                       PopupAnimation="Fade"
                                       HorizontalOffset="-4"
                                       Placement="Left">
                                    <Border Background="{DynamicResource SolidBackgroundFillColorBaseBrush}"
                                            CornerRadius="6"
                                            BorderThickness="1"
                                            MinWidth="170"
                                            BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                                            Padding="8">
                                        <StackPanel>
                                            <TextBlock Foreground="{DynamicResource TextFillColorPrimaryBrush}">Customize</TextBlock>
                                        </StackPanel>
                                    </Border>
                                </Popup>
                                <UniformGrid Columns="2"
                                             Margin="0,4,0,0">
                                    <Button HorizontalAlignment="Stretch"
                                            Margin="0,0,4,0"
                                            Command="{Binding NavigateToOptimizationCommand}"
                                            CommandParameter="Battery">
                                        <StackPanel Margin="0">
                                            <iconPacks:PackIconControl HorizontalAlignment="Center"
                                                                       Margin="0,4,0,4"
                                                                       Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                                       Kind="{x:Static iconPacks:PackIconLucideKind.Power}" />
                                            <TextBlock HorizontalAlignment="Center">Power Manager</TextBlock>
                                        </StackPanel>
                                    </Button>
                                    <Button HorizontalAlignment="Stretch"
                                            Margin="4,0,0,0"
                                            Command="{Binding NavigateToOptimizationCommand}"
                                            CommandParameter="Video">
                                        <StackPanel Margin="0">
                                            <iconPacks:PackIconControl HorizontalAlignment="Center"
                                                                       Margin="0,4,0,4"
                                                                       Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                                       Kind="{x:Static iconPacks:PackIconLucideKind.Gpu}" />
                                            <TextBlock HorizontalAlignment="Center">Video Manager</TextBlock>
                                        </StackPanel>
                                    </Button>
                                    <Button HorizontalAlignment="Stretch"
                                            Margin="0,8,4,0"
                                            Command="{Binding NavigateToOptimizationCommand}"
                                            CommandParameter="Memory">
                                        <StackPanel Margin="0">
                                            <iconPacks:PackIconControl HorizontalAlignment="Center"
                                                                       Margin="0,4,0,4"
                                                                       Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                                                       Kind="{x:Static iconPacks:PackIconLucideKind.MemoryStick}" />
                                            <TextBlock HorizontalAlignment="Center">Memory Manager</TextBlock>
                                        </StackPanel>
                                    </Button>
                                </UniformGrid>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Grid>
            </Border>
            <Border Grid.Row="1"
                    Padding="12,8"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    BorderThickness="0,1,0,0"
                    BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                    Background="{DynamicResource CardBackgroundFillColorSecondaryBrush}">
                <DockPanel>
                    <iconPacks:PackIconControl Margin="0,0,8,0"
                                               VerticalAlignment="Center"
                                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                               Kind="{x:Static iconPacks:PackIconRemixIconKind.MicrosoftFill}" />
                    <TextBlock Text="{Binding WindowsVersion}"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                    <StackPanel HorizontalAlignment="Right"
                                Orientation="Horizontal"
                                ToolTip="The time the system takes to post. A value over 70 seconds might mean a hardware issue/conflict.">
                        <iconPacks:PackIconControl Margin="0,0,8,0"
                                                   VerticalAlignment="Center"
                                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                                   Kind="{x:Static iconPacks:PackIconLucideKind.Timer}" />
                        <TextBlock Text="{Binding PostTime, StringFormat=POST time: {0:F2} seconds}"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                    </StackPanel>
                </DockPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>